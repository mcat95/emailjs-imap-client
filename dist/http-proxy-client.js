'use strict';

/**
 * Minimal HTTP/S proxy client
 */
const net = require('net');
const tls = require('tls');

/**
 * Establishes proxied connection to destinationPort
 *
 * httpProxyClient("http://localhost:3128/", 80, "google.com", function(err, socket){
 *     socket.write("GET / HTTP/1.0\r\n\r\n");
 * });
 *
 * @param {String} proxyUrl proxy configuration, etg "http://proxy.host:3128/"
 * @param {Number} destinationPort Port to open in destination host
 * @param {String} destinationHost Destination hostname
 * @param {Function} callback Callback to run with the rocket object once connection is established
 */
function httpProxyClient(proxyUrl, destinationPort, destinationHost, callback) {
  const proxy = new URL(proxyUrl);

  // create a socket connection to the proxy server
  let connect;
  let socket = null;
  const options = {
    host: proxy.hostname,
    port: Number(proxy.port) ? Number(proxy.port) : proxy.protocol === 'https:' ? 443 : 80
  };
  if (proxy.protocol === 'https:') {
    // we can use untrusted proxies as long as we verify actual SMTP certificates
    options.rejectUnauthorized = false;
    connect = tls.connect.bind(tls);
  } else {
    connect = net.connect.bind(net);
  }

  // Error harness for initial connection. Once connection is established, the responsibility
  // to handle errors is passed to whoever uses this socket
  let finished = false;
  const tempSocketErr = err => {
    if (finished) {
      return;
    }
    finished = true;
    try {
      socket.destroy();
    } catch (e) {
      // ignore
    }
    callback(err);
  };
  const timeoutErr = () => {
    const err = new Error('Proxy socket timed out');
    err.code = 'ETIMEDOUT';
    tempSocketErr(err);
  };
  socket = connect(options, () => {
    if (finished) {
      return;
    }
    const reqHeaders = {
      Host: destinationHost + ':' + destinationPort,
      Connection: 'close'
    };
    if (proxy.username || proxy.password) {
      reqHeaders['Proxy-Authorization'] = 'Basic ' + Buffer.from(proxy.username + ':' + proxy.password).toString('base64');
    }
    socket.write(
    // HTTP method
    'CONNECT ' + destinationHost + ':' + destinationPort + ' HTTP/1.1\r\n' +
    // HTTP request headers
    Object.keys(reqHeaders).map(key => key + ': ' + reqHeaders[key]).join('\r\n') +
    // End request
    '\r\n\r\n');
    let headers = '';
    const onSocketData = chunk => {
      let match;
      let remainder;
      if (finished) {
        return;
      }
      headers += chunk.toString('binary');
      if (match = headers.match(/\r\n\r\n/)) {
        socket.removeListener('data', onSocketData);
        remainder = headers.substr(match.index + match[0].length);
        headers = headers.substr(0, match.index);
        if (remainder) {
          socket.unshift(Buffer.from(remainder, 'binary'));
        }

        // proxy connection is now established
        finished = true;

        // check response code
        match = headers.match(/^HTTP\/\d+\.\d+ (\d+)/i);
        if (!match || (match[1] || '').charAt(0) !== '2') {
          try {
            socket.destroy();
          } catch (e) {
            // ignore
          }
          return callback(new Error('Invalid response from proxy' + (match && ': ' + match[1] || '')));
        }
        socket.removeListener('error', tempSocketErr);
        socket.removeListener('timeout', timeoutErr);
        socket.setTimeout(0);
        return callback(null, socket);
      }
    };
    socket.on('data', onSocketData);
  });
  socket.setTimeout(httpProxyClient.timeout || 30 * 1000);
  socket.on('timeout', timeoutErr);
  socket.once('error', tempSocketErr);
  return socket;
}
module.exports = httpProxyClient;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJuZXQiLCJyZXF1aXJlIiwidGxzIiwiaHR0cFByb3h5Q2xpZW50IiwicHJveHlVcmwiLCJkZXN0aW5hdGlvblBvcnQiLCJkZXN0aW5hdGlvbkhvc3QiLCJjYWxsYmFjayIsInByb3h5IiwiVVJMIiwiY29ubmVjdCIsInNvY2tldCIsIm9wdGlvbnMiLCJob3N0IiwiaG9zdG5hbWUiLCJwb3J0IiwiTnVtYmVyIiwicHJvdG9jb2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJiaW5kIiwiZmluaXNoZWQiLCJ0ZW1wU29ja2V0RXJyIiwiZXJyIiwiZGVzdHJveSIsImUiLCJ0aW1lb3V0RXJyIiwiRXJyb3IiLCJjb2RlIiwicmVxSGVhZGVycyIsIkhvc3QiLCJDb25uZWN0aW9uIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIndyaXRlIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsImpvaW4iLCJoZWFkZXJzIiwib25Tb2NrZXREYXRhIiwiY2h1bmsiLCJtYXRjaCIsInJlbWFpbmRlciIsInJlbW92ZUxpc3RlbmVyIiwic3Vic3RyIiwiaW5kZXgiLCJsZW5ndGgiLCJ1bnNoaWZ0IiwiY2hhckF0Iiwic2V0VGltZW91dCIsIm9uIiwidGltZW91dCIsIm9uY2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vc3JjL2h0dHAtcHJveHktY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIE1pbmltYWwgSFRUUC9TIHByb3h5IGNsaWVudFxuICovXG5cbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpXG5jb25zdCB0bHMgPSByZXF1aXJlKCd0bHMnKVxuXG4vKipcbiAqIEVzdGFibGlzaGVzIHByb3hpZWQgY29ubmVjdGlvbiB0byBkZXN0aW5hdGlvblBvcnRcbiAqXG4gKiBodHRwUHJveHlDbGllbnQoXCJodHRwOi8vbG9jYWxob3N0OjMxMjgvXCIsIDgwLCBcImdvb2dsZS5jb21cIiwgZnVuY3Rpb24oZXJyLCBzb2NrZXQpe1xuICogICAgIHNvY2tldC53cml0ZShcIkdFVCAvIEhUVFAvMS4wXFxyXFxuXFxyXFxuXCIpO1xuICogfSk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3h5VXJsIHByb3h5IGNvbmZpZ3VyYXRpb24sIGV0ZyBcImh0dHA6Ly9wcm94eS5ob3N0OjMxMjgvXCJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZXN0aW5hdGlvblBvcnQgUG9ydCB0byBvcGVuIGluIGRlc3RpbmF0aW9uIGhvc3RcbiAqIEBwYXJhbSB7U3RyaW5nfSBkZXN0aW5hdGlvbkhvc3QgRGVzdGluYXRpb24gaG9zdG5hbWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIHRvIHJ1biB3aXRoIHRoZSByb2NrZXQgb2JqZWN0IG9uY2UgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZFxuICovXG5mdW5jdGlvbiBodHRwUHJveHlDbGllbnQgKHByb3h5VXJsLCBkZXN0aW5hdGlvblBvcnQsIGRlc3RpbmF0aW9uSG9zdCwgY2FsbGJhY2spIHtcbiAgY29uc3QgcHJveHkgPSBuZXcgVVJMKHByb3h5VXJsKVxuXG4gIC8vIGNyZWF0ZSBhIHNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBwcm94eSBzZXJ2ZXJcbiAgbGV0IGNvbm5lY3RcbiAgbGV0IHNvY2tldCA9IG51bGxcblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGhvc3Q6IHByb3h5Lmhvc3RuYW1lLFxuICAgIHBvcnQ6IE51bWJlcihwcm94eS5wb3J0KSA/IE51bWJlcihwcm94eS5wb3J0KSA6IHByb3h5LnByb3RvY29sID09PSAnaHR0cHM6JyA/IDQ0MyA6IDgwXG4gIH1cblxuICBpZiAocHJveHkucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgLy8gd2UgY2FuIHVzZSB1bnRydXN0ZWQgcHJveGllcyBhcyBsb25nIGFzIHdlIHZlcmlmeSBhY3R1YWwgU01UUCBjZXJ0aWZpY2F0ZXNcbiAgICBvcHRpb25zLnJlamVjdFVuYXV0aG9yaXplZCA9IGZhbHNlXG4gICAgY29ubmVjdCA9IHRscy5jb25uZWN0LmJpbmQodGxzKVxuICB9IGVsc2Uge1xuICAgIGNvbm5lY3QgPSBuZXQuY29ubmVjdC5iaW5kKG5ldClcbiAgfVxuXG4gIC8vIEVycm9yIGhhcm5lc3MgZm9yIGluaXRpYWwgY29ubmVjdGlvbi4gT25jZSBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLCB0aGUgcmVzcG9uc2liaWxpdHlcbiAgLy8gdG8gaGFuZGxlIGVycm9ycyBpcyBwYXNzZWQgdG8gd2hvZXZlciB1c2VzIHRoaXMgc29ja2V0XG4gIGxldCBmaW5pc2hlZCA9IGZhbHNlXG4gIGNvbnN0IHRlbXBTb2NrZXRFcnIgPSBlcnIgPT4ge1xuICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGZpbmlzaGVkID0gdHJ1ZVxuICAgIHRyeSB7XG4gICAgICBzb2NrZXQuZGVzdHJveSgpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gaWdub3JlXG4gICAgfVxuICAgIGNhbGxiYWNrKGVycilcbiAgfVxuXG4gIGNvbnN0IHRpbWVvdXRFcnIgPSAoKSA9PiB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdQcm94eSBzb2NrZXQgdGltZWQgb3V0JylcbiAgICBlcnIuY29kZSA9ICdFVElNRURPVVQnXG4gICAgdGVtcFNvY2tldEVycihlcnIpXG4gIH1cblxuICBzb2NrZXQgPSBjb25uZWN0KG9wdGlvbnMsICgpID0+IHtcbiAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlcUhlYWRlcnMgPSB7XG4gICAgICBIb3N0OiBkZXN0aW5hdGlvbkhvc3QgKyAnOicgKyBkZXN0aW5hdGlvblBvcnQsXG4gICAgICBDb25uZWN0aW9uOiAnY2xvc2UnXG4gICAgfVxuICAgIGlmIChwcm94eS51c2VybmFtZSB8fCBwcm94eS5wYXNzd29yZCkge1xuICAgICAgcmVxSGVhZGVyc1snUHJveHktQXV0aG9yaXphdGlvbiddID0gJ0Jhc2ljICcgKyBCdWZmZXIuZnJvbShwcm94eS51c2VybmFtZSArICc6JyArIHByb3h5LnBhc3N3b3JkKS50b1N0cmluZygnYmFzZTY0JylcbiAgICB9XG5cbiAgICBzb2NrZXQud3JpdGUoXG4gICAgICAvLyBIVFRQIG1ldGhvZFxuICAgICAgJ0NPTk5FQ1QgJyArXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25Ib3N0ICtcbiAgICAgICAgICAgICAgICAnOicgK1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uUG9ydCArXG4gICAgICAgICAgICAgICAgJyBIVFRQLzEuMVxcclxcbicgK1xuICAgICAgICAgICAgICAgIC8vIEhUVFAgcmVxdWVzdCBoZWFkZXJzXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocmVxSGVhZGVycylcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGtleSArICc6ICcgKyByZXFIZWFkZXJzW2tleV0pXG4gICAgICAgICAgICAgICAgICAuam9pbignXFxyXFxuJykgK1xuICAgICAgICAgICAgICAgIC8vIEVuZCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgJ1xcclxcblxcclxcbidcbiAgICApXG5cbiAgICBsZXQgaGVhZGVycyA9ICcnXG4gICAgY29uc3Qgb25Tb2NrZXREYXRhID0gY2h1bmsgPT4ge1xuICAgICAgbGV0IG1hdGNoXG4gICAgICBsZXQgcmVtYWluZGVyXG5cbiAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaGVhZGVycyArPSBjaHVuay50b1N0cmluZygnYmluYXJ5JylcbiAgICAgIGlmICgobWF0Y2ggPSBoZWFkZXJzLm1hdGNoKC9cXHJcXG5cXHJcXG4vKSkpIHtcbiAgICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25Tb2NrZXREYXRhKVxuXG4gICAgICAgIHJlbWFpbmRlciA9IGhlYWRlcnMuc3Vic3RyKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKVxuICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zdWJzdHIoMCwgbWF0Y2guaW5kZXgpXG4gICAgICAgIGlmIChyZW1haW5kZXIpIHtcbiAgICAgICAgICBzb2NrZXQudW5zaGlmdChCdWZmZXIuZnJvbShyZW1haW5kZXIsICdiaW5hcnknKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByb3h5IGNvbm5lY3Rpb24gaXMgbm93IGVzdGFibGlzaGVkXG4gICAgICAgIGZpbmlzaGVkID0gdHJ1ZVxuXG4gICAgICAgIC8vIGNoZWNrIHJlc3BvbnNlIGNvZGVcbiAgICAgICAgbWF0Y2ggPSBoZWFkZXJzLm1hdGNoKC9eSFRUUFxcL1xcZCtcXC5cXGQrIChcXGQrKS9pKVxuICAgICAgICBpZiAoIW1hdGNoIHx8IChtYXRjaFsxXSB8fCAnJykuY2hhckF0KDApICE9PSAnMicpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc29ja2V0LmRlc3Ryb3koKVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZyb20gcHJveHknICsgKChtYXRjaCAmJiAnOiAnICsgbWF0Y2hbMV0pIHx8ICcnKSkpXG4gICAgICAgIH1cblxuICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgdGVtcFNvY2tldEVycilcbiAgICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCd0aW1lb3V0JywgdGltZW91dEVycilcbiAgICAgICAgc29ja2V0LnNldFRpbWVvdXQoMClcblxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgc29ja2V0KVxuICAgICAgfVxuICAgIH1cbiAgICBzb2NrZXQub24oJ2RhdGEnLCBvblNvY2tldERhdGEpXG4gIH0pXG5cbiAgc29ja2V0LnNldFRpbWVvdXQoaHR0cFByb3h5Q2xpZW50LnRpbWVvdXQgfHwgMzAgKiAxMDAwKVxuICBzb2NrZXQub24oJ3RpbWVvdXQnLCB0aW1lb3V0RXJyKVxuXG4gIHNvY2tldC5vbmNlKCdlcnJvcicsIHRlbXBTb2NrZXRFcnIpXG4gIHJldHVybiBzb2NrZXRcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBodHRwUHJveHlDbGllbnRcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDMUIsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsS0FBSyxDQUFDOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTRSxlQUFlQSxDQUFFQyxRQUFRLEVBQUVDLGVBQWUsRUFBRUMsZUFBZSxFQUFFQyxRQUFRLEVBQUU7RUFDOUUsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUcsQ0FBQ0wsUUFBUSxDQUFDOztFQUUvQjtFQUNBLElBQUlNLE9BQU87RUFDWCxJQUFJQyxNQUFNLEdBQUcsSUFBSTtFQUVqQixNQUFNQyxPQUFPLEdBQUc7SUFDZEMsSUFBSSxFQUFFTCxLQUFLLENBQUNNLFFBQVE7SUFDcEJDLElBQUksRUFBRUMsTUFBTSxDQUFDUixLQUFLLENBQUNPLElBQUksQ0FBQyxHQUFHQyxNQUFNLENBQUNSLEtBQUssQ0FBQ08sSUFBSSxDQUFDLEdBQUdQLEtBQUssQ0FBQ1MsUUFBUSxLQUFLLFFBQVEsR0FBRyxHQUFHLEdBQUc7RUFDdEYsQ0FBQztFQUVELElBQUlULEtBQUssQ0FBQ1MsUUFBUSxLQUFLLFFBQVEsRUFBRTtJQUMvQjtJQUNBTCxPQUFPLENBQUNNLGtCQUFrQixHQUFHLEtBQUs7SUFDbENSLE9BQU8sR0FBR1IsR0FBRyxDQUFDUSxPQUFPLENBQUNTLElBQUksQ0FBQ2pCLEdBQUcsQ0FBQztFQUNqQyxDQUFDLE1BQU07SUFDTFEsT0FB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