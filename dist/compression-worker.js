"use strict";

var _compression = _interopRequireDefault(require("./compression"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const MESSAGE_INITIALIZE_WORKER = 'start';
const MESSAGE_INFLATE = 'inflate';
const MESSAGE_INFLATED_DATA_READY = 'inflated_ready';
const MESSAGE_DEFLATE = 'deflate';
const MESSAGE_DEFLATED_DATA_READY = 'deflated_ready';
const createMessage = (message, buffer) => ({
  message,
  buffer
});
const inflatedReady = buffer => self.postMessage(createMessage(MESSAGE_INFLATED_DATA_READY, buffer), [buffer]);
const deflatedReady = buffer => self.postMessage(createMessage(MESSAGE_DEFLATED_DATA_READY, buffer), [buffer]);
const compressor = new _compression.default(inflatedReady, deflatedReady);
self.onmessage = function (e) {
  const message = e.data.message;
  const buffer = e.data.buffer;
  switch (message) {
    case MESSAGE_INITIALIZE_WORKER:
      break;
    case MESSAGE_INFLATE:
      compressor.inflate(buffer);
      break;
    case MESSAGE_DEFLATE:
      compressor.deflate(buffer);
      break;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29tcHJlc3Npb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk1FU1NBR0VfSU5JVElBTElaRV9XT1JLRVIiLCJNRVNTQUdFX0lORkxBVEUiLCJNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFkiLCJNRVNTQUdFX0RFRkxBVEUiLCJNRVNTQUdFX0RFRkxBVEVEX0RBVEFfUkVBRFkiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsImJ1ZmZlciIsImluZmxhdGVkUmVhZHkiLCJzZWxmIiwicG9zdE1lc3NhZ2UiLCJkZWZsYXRlZFJlYWR5IiwiY29tcHJlc3NvciIsIkNvbXByZXNzb3IiLCJvbm1lc3NhZ2UiLCJkYXRhIiwiaW5mbGF0ZSIsImRlZmxhdGUiXSwic291cmNlcyI6WyIuLi9zcmMvY29tcHJlc3Npb24td29ya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wcmVzc29yIGZyb20gJy4vY29tcHJlc3Npb24nXG5cbmNvbnN0IE1FU1NBR0VfSU5JVElBTElaRV9XT1JLRVIgPSAnc3RhcnQnXG5jb25zdCBNRVNTQUdFX0lORkxBVEUgPSAnaW5mbGF0ZSdcbmNvbnN0IE1FU1NBR0VfSU5GTEFURURfREFUQV9SRUFEWSA9ICdpbmZsYXRlZF9yZWFkeSdcbmNvbnN0IE1FU1NBR0VfREVGTEFURSA9ICdkZWZsYXRlJ1xuY29uc3QgTUVTU0FHRV9ERUZMQVRFRF9EQVRBX1JFQURZID0gJ2RlZmxhdGVkX3JlYWR5J1xuXG5jb25zdCBjcmVhdGVNZXNzYWdlID0gKG1lc3NhZ2UsIGJ1ZmZlcikgPT4gKHsgbWVzc2FnZSwgYnVmZmVyIH0pXG5cbmNvbnN0IGluZmxhdGVkUmVhZHkgPSBidWZmZXIgPT4gc2VsZi5wb3N0TWVzc2FnZShjcmVhdGVNZXNzYWdlKE1FU1NBR0VfSU5GTEFURURfREFUQV9SRUFEWSwgYnVmZmVyKSwgW2J1ZmZlcl0pXG5jb25zdCBkZWZsYXRlZFJlYWR5ID0gYnVmZmVyID0+IHNlbGYucG9zdE1lc3NhZ2UoY3JlYXRlTWVzc2FnZShNRVNTQUdFX0RFRkxBVEVEX0RBVEFfUkVBRFksIGJ1ZmZlciksIFtidWZmZXJdKVxuY29uc3QgY29tcHJlc3NvciA9IG5ldyBDb21wcmVzc29yKGluZmxhdGVkUmVhZHksIGRlZmxhdGVkUmVhZHkpXG5cbnNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgY29uc3QgbWVzc2FnZSA9IGUuZGF0YS5tZXNzYWdlXG4gIGNvbnN0IGJ1ZmZlciA9IGUuZGF0YS5idWZmZXJcblxuICBzd2l0Y2ggKG1lc3NhZ2UpIHtcbiAgICBjYXNlIE1FU1NBR0VfSU5JVElBTElaRV9XT1JLRVI6XG4gICAgICBicmVha1xuXG4gICAgY2FzZSBNRVNTQUdFX0lORkxBVEU6XG4gICAgICBjb21wcmVzc29yLmluZmxhdGUoYnVmZmVyKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgTUVTU0FHRV9ERUZMQVRFOlxuICAgICAgY29tcHJlc3Nvci5kZWZsYXRlKGJ1ZmZlcilcbiAgICAgIGJyZWFrXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxZQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBc0MsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFdEMsTUFBTUcseUJBQXlCLEdBQUcsT0FBTztBQUN6QyxNQUFNQyxlQUFlLEdBQUcsU0FBUztBQUNqQyxNQUFNQywyQkFBMkIsR0FBRyxnQkFBZ0I7QUFDcEQsTUFBTUMsZUFBZSxHQUFHLFNBQVM7QUFDakMsTUFBTUMsMkJBQTJCLEdBQUcsZ0JBQWdCO0FBRXBELE1BQU1DLGFBQWEsR0FBR0EsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLE1BQU07RUFBRUQsT0FBTztFQUFFQztBQUFPLENBQUMsQ0FBQztBQUVoRSxNQUFNQyxhQUFhLEdBQUdELE1BQU0sSUFBSUUsSUFBSSxDQUFDQyxXQUFXLENBQUNMLGFBQWEsQ0FBQ0gsMkJBQTJCLEVBQUVLLE1BQU0sQ0FBQyxFQUFFLENBQUNBLE1BQU0sQ0FBQyxDQUFDO0FBQzlHLE1BQU1JLGFBQWEsR0FBR0osTUFBTSxJQUFJRSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0wsYUFBYSxDQUFDRCwyQkFBMkIsRUFBRUcsTUFBTSxDQUFDLEVBQUUsQ0FBQ0EsTUFBTSxDQUFDLENBQUM7QUFDOUcsTUFBTUssVUFBVSxHQUFHLElBQUlDLG9CQUFVLENBQUNMLGFBQWEsRUFBRUcsYUFBYSxDQUFDO0FBRS9ERixJQUFJLENBQUNLLFNBQVMsR0FBRyxVQUFVakIsQ0FBQyxFQUFFO0VBQzVCLE1BQU1TLE9BQU8sR0FBR1QsQ0FBQyxDQUFDa0IsSUFBSSxDQUFDVCxPQUFPO0VBQzlCLE1BQU1DLE1BQU0sR0FBR1YsQ0FBQyxDQUFDa0IsSUFBSSxDQUFDUixNQUFNO0VBRTVCLFFBQVFELE9BQU87SUFDYixLQUFLTix5QkFBeUI7TUFDNUI7SUFFRixLQUFLQyxlQUFlO01BQ2xCVyxVQUFVLENBQUNJLE9BQU8sQ0FBQ1QsTUFBTSxDQUFDO01BQzFCO0lBRUYsS0FBS0osZUFBZTtNQUNsQlMsVUFBVSxDQUFDSyxPQUFPLENBQUNWLE1BQU0sQ0FBQztNQUMxQjtFQUNKO0FBQ0YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==