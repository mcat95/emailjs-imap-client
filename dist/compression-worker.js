"use strict";

var _compression = _interopRequireDefault(require("./compression"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const MESSAGE_INITIALIZE_WORKER = 'start';
const MESSAGE_INFLATE = 'inflate';
const MESSAGE_INFLATED_DATA_READY = 'inflated_ready';
const MESSAGE_DEFLATE = 'deflate';
const MESSAGE_DEFLATED_DATA_READY = 'deflated_ready';
const createMessage = (message, buffer) => ({
  message,
  buffer
});
const inflatedReady = buffer => self.postMessage(createMessage(MESSAGE_INFLATED_DATA_READY, buffer), [buffer]);
const deflatedReady = buffer => self.postMessage(createMessage(MESSAGE_DEFLATED_DATA_READY, buffer), [buffer]);
const compressor = new _compression.default(inflatedReady, deflatedReady);
self.onmessage = function (e) {
  const message = e.data.message;
  const buffer = e.data.buffer;
  switch (message) {
    case MESSAGE_INITIALIZE_WORKER:
      break;
    case MESSAGE_INFLATE:
      compressor.inflate(buffer);
      break;
    case MESSAGE_DEFLATE:
      compressor.deflate(buffer);
      break;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNRVNTQUdFX0lOSVRJQUxJWkVfV09SS0VSIiwiTUVTU0FHRV9JTkZMQVRFIiwiTUVTU0FHRV9JTkZMQVRFRF9EQVRBX1JFQURZIiwiTUVTU0FHRV9ERUZMQVRFIiwiTUVTU0FHRV9ERUZMQVRFRF9EQVRBX1JFQURZIiwiY3JlYXRlTWVzc2FnZSIsIm1lc3NhZ2UiLCJidWZmZXIiLCJpbmZsYXRlZFJlYWR5Iiwic2VsZiIsInBvc3RNZXNzYWdlIiwiZGVmbGF0ZWRSZWFkeSIsImNvbXByZXNzb3IiLCJDb21wcmVzc29yIiwib25tZXNzYWdlIiwiZSIsImRhdGEiLCJpbmZsYXRlIiwiZGVmbGF0ZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wcmVzc2lvbi13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbXByZXNzb3IgZnJvbSAnLi9jb21wcmVzc2lvbidcblxuY29uc3QgTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUiA9ICdzdGFydCdcbmNvbnN0IE1FU1NBR0VfSU5GTEFURSA9ICdpbmZsYXRlJ1xuY29uc3QgTUVTU0FHRV9JTkZMQVRFRF9EQVRBX1JFQURZID0gJ2luZmxhdGVkX3JlYWR5J1xuY29uc3QgTUVTU0FHRV9ERUZMQVRFID0gJ2RlZmxhdGUnXG5jb25zdCBNRVNTQUdFX0RFRkxBVEVEX0RBVEFfUkVBRFkgPSAnZGVmbGF0ZWRfcmVhZHknXG5cbmNvbnN0IGNyZWF0ZU1lc3NhZ2UgPSAobWVzc2FnZSwgYnVmZmVyKSA9PiAoeyBtZXNzYWdlLCBidWZmZXIgfSlcblxuY29uc3QgaW5mbGF0ZWRSZWFkeSA9IGJ1ZmZlciA9PiBzZWxmLnBvc3RNZXNzYWdlKGNyZWF0ZU1lc3NhZ2UoTUVTU0FHRV9JTkZMQVRFRF9EQVRBX1JFQURZLCBidWZmZXIpLCBbYnVmZmVyXSlcbmNvbnN0IGRlZmxhdGVkUmVhZHkgPSBidWZmZXIgPT4gc2VsZi5wb3N0TWVzc2FnZShjcmVhdGVNZXNzYWdlKE1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSwgYnVmZmVyKSwgW2J1ZmZlcl0pXG5jb25zdCBjb21wcmVzc29yID0gbmV3IENvbXByZXNzb3IoaW5mbGF0ZWRSZWFkeSwgZGVmbGF0ZWRSZWFkeSlcblxuc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICBjb25zdCBtZXNzYWdlID0gZS5kYXRhLm1lc3NhZ2VcbiAgY29uc3QgYnVmZmVyID0gZS5kYXRhLmJ1ZmZlclxuXG4gIHN3aXRjaCAobWVzc2FnZSkge1xuICAgIGNhc2UgTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUjpcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlIE1FU1NBR0VfSU5GTEFURTpcbiAgICAgIGNvbXByZXNzb3IuaW5mbGF0ZShidWZmZXIpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSBNRVNTQUdFX0RFRkxBVEU6XG4gICAgICBjb21wcmVzc29yLmRlZmxhdGUoYnVmZmVyKVxuICAgICAgYnJlYWtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQXNDO0FBRXRDLE1BQU1BLHlCQUF5QixHQUFHLE9BQU87QUFDekMsTUFBTUMsZUFBZSxHQUFHLFNBQVM7QUFDakMsTUFBTUMsMkJBQTJCLEdBQUcsZ0JBQWdCO0FBQ3BELE1BQU1DLGVBQWUsR0FBRyxTQUFTO0FBQ2pDLE1BQU1DLDJCQUEyQixHQUFHLGdCQUFnQjtBQUVwRCxNQUFNQyxhQUFhLEdBQUcsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLE1BQU07RUFBRUQsT0FBTztFQUFFQztBQUFPLENBQUMsQ0FBQztBQUVoRSxNQUFNQyxhQUFhLEdBQUdELE1BQU0sSUFBSUUsSUFBSSxDQUFDQyxXQUFXLENBQUNMLGFBQWEsQ0FBQ0gsMkJBQTJCLEVBQUVLLE1BQU0sQ0FBQyxFQUFFLENBQUNBLE1BQU0sQ0FBQyxDQUFDO0FBQzlHLE1BQU1JLGFBQWEsR0FBR0osTUFBTSxJQUFJRSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0wsYUFBYSxDQUFDRCwyQkFBMkIsRUFBRUcsTUFBTSxDQUFDLEVBQUUsQ0FBQ0EsTUFBTSxDQUFDLENBQUM7QUFDOUcsTUFBTUssVUFBVSxHQUFHLElBQUlDLG9CQUFVLENBQUNMLGFBQWEsRUFBRUcsYUFBYSxDQUFDO0FBRS9ERixJQUFJLENBQUNLLFNBQVMsR0FBRyxVQUFVQyxDQUFDLEVBQUU7RUFDNUIsTUFBTVQsT0FBTyxHQUFHUyxDQUFDLENBQUNDLElBQUksQ0FBQ1YsT0FBTztFQUM5QixNQUFNQyxNQUFNLEdBQUdRLENBQUMsQ0FBQ0MsSUFBSSxDQUFDVCxNQUFNO0VBRTVCLFFBQVFELE9BQU87SUFDYixLQUFLTix5QkFBeUI7TUFDNUI7SUFFRixLQUFLQyxlQUFlO01BQ2xCVyxVQUFVLENBQUNLLE9BQU8sQ0FBQ1YsTUFBTSxDQUFDO01BQzFCO0lBRUYsS0FBS0osZUFBZTtNQUNsQlMsVUFBVSxDQUFDTSxPQUFPLENBQUNYLE1BQU0sQ0FBQztNQUMxQjtFQUFLO0FBRVgsQ0FBQyJ9